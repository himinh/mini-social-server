name: Release

on:
  # Trigger the workflow on push or pull request,
  # but only for the main branch
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - docker: build . -t minhchiu/minisocialserver
      - run: echo "${{secrets.DOCKERHUB_PASSWORD}}" | docker login -u ${{secrets.DOCKERHUB_USERNAME}} --password stdin
      - run: docker push minhchiu/minisocialserver
